---
title: 处理机调度
date: 2018-05-12 08:22:38
tags:
categories: 系统学习

---

本篇博客的主要内容是介绍调度算法。

## 1.关于处理机调度的基础概念
<!--more-->
处理机调度：

1.从就绪队列中挑选下一个占用CPU运行的进程。

2.从多个可用cpu中挑选就绪进程可使用的CPU资源。

调度程序：挑选就绪进程的内核函数，如果是多处理机，即挑选cpu。

调度算法的核心：依据什么进行调度和调度时机。下面来详细说一下

1.调度时机

对于非抢占的情况来说：进程从运行变为等待可以调度一个就绪进程运行，或者运行进程退出时也可以调度。

对于抢占的情况来说：中断请求被服务例程相应完成的时候，或者进程时间片用完，或者进程从等待切换到就绪状态(此进程优先级高)

2.调度的准则依据是什么

衡量一个调度算法的好坏即cpu的繁忙率、还有就是吞吐量（即cpu单位时间完成的进程数）这是从系统角度，从用户角度的话，即速度快不快。

## 2.调度算法

调度算法有这么几种：先来先服务算法、短进程优先算法、最高响应比优先算法（依据等待时间）、时间片轮转算法（在先来先服务器基础上加上时间片）、多级反馈队列算法、公平共享调度算法

### 1.先来先服务算法

依据进程进入就绪状态的先后顺序排列，正在运行的进程进入等待状态或者结束状态时，就绪队列中的下一个进程去运行。。

这个算法的优点是简单，缺点是会造成平均等待时间较大，这个缺点怎么理解呢？

比如有三个进程ABC执行时间分别是12 3 3，那么假如在就绪队列中的排序为A B C那么周转时间就是 （12+15+18/3=15，如果是B C A 的话那么（3+3+15）/3=9周转时间就是9了。。所以这就是一个很大的问题。

对于这种算法的改进就是短进程优先算法

## 2.短进程优先算法（SPN）

选择进程占用的时间少的先运行，即就绪队列按预期的执行时间来排序。但是如果就绪队列中来了一个比当前执行了一半剩余时间还要短的进程，那么他可以抢占cpu去执行。这个就是该进程的算法，即短剩余时间优先算法（SRT）

短时间优先的特征：

优点：进程的周转时间最短。缺点：如果短进程较多的话,那么长时间进程会导致饥饿。还有的缺点就是如何知道进程的执行时间长短（1.询问用户，或者用过去预测未来）

## 3.最高响应比优先

根据响应比选择就绪队列中响应比R值最高的进程。

R=(W+S)/S

W:等待时间

S：执行时间

这是基于短进程优先的改进，即也没有抢占。

以上根据就绪队列排序的算法就说完了。。

## 4.时间片轮转算法

时间片结束时按照先来先服务下一个进程去执行。

这种算法会有额外的上下文切换的开销

那么时间片大小如何确定呢？

太大的话就和先来先服务一样了，太短的话 ，上下文切换开销大，影响吞吐量

目前来说只能根据经验来规定：即10ms切换 一次

## 5.多级反馈调度算法（MQ）

就就绪队列被划分为多个独立的子队列，例如：前台（时间片短）、后台（执行时间长），这样的话后台进程可能会导致饥饿，所以可以给不同的队列分配不同的时间片从而防止饥饿产生。。所以就进阶产生了多级反馈队列。即进程可以在不同的队列间移动的多级队列算法。

传统的调度算法到此就说完了。。。

下面说说实时调度的算法。。

静态的速度单调调度算法：

1.根据任务周期安排优先级

2。周期越短先执行

最早截止时间优先算法


